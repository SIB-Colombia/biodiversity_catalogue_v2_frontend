{"version":3,"sources":["src/auth/index.js"],"names":["http","isAuthenticated","me","signin","logout","type","data","body","FormData","key","append","method","headers","Headers","localStorage","getItem","server","local","then","response","json","user","removeItem"],"mappings":";;;;;QAKgBA,I,GAAAA,I;QAuBAC,e,GAAAA,e;QAaAC,E,GAAAA,E;QAYAC,M,GAAAA,M;QAYAC,M,GAAAA,M;;AAjEhB;;;;AACA;;;;;;AAEA;;AAEO,SAASJ,IAAT,CAAcK,IAAd,EAAoBC,IAApB,EAA0B;;AAE/B,MAAIC,OAAO,IAAIC,QAAJ,EAAX;;AAEA,MAAIF,IAAJ,EAAU;AACR,SAAK,IAAIG,GAAT,IAAgBH,IAAhB,EAAsB;AACpBC,WAAKG,MAAL,CAAYD,GAAZ,EAAiBH,KAAKG,GAAL,CAAjB;AACD;AACF;;AAED,SAAO;AACLE,YAAQN,IADH;AAEL;AACAO,aAAS,IAAIC,OAAJ,CAAY,EAAC,6BAA2BC,aAAaC,OAAb,CAAqB,gBAArB,CAA5B,EAAZ,CAHJ;AAILR,UAAMD,OACFC,IADE,GAEF;AANC,GAAP;AASD;;AAED;;AAEO,SAASN,eAAT,GAA2B,CASjC;AARC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGF;;AAEO,SAASC,EAAT,GAAc;;AAEnB,SAAO,+BAAS,gBAAMc,MAAN,CAAaC,KAAtB,mBAA2CjB,KAAK,KAAL,EAAY,IAAZ,CAA3C,EAA8DkB,IAA9D,CAAmE,UAACC,QAAD,EAAc;AACtF,WAAOA,SAASC,IAAT,EAAP;AACD,GAFM,EAEJF,IAFI,CAEC,UAACZ,IAAD,EAAU;AAChB,WAAOA,IAAP;AACD,GAJM,CAAP;AAMD;;AAED;;AAEO,SAASH,MAAT,CAAgBkB,IAAhB,EAAsB;;AAE3B,SAAO,+BAAS,gBAAML,MAAN,CAAaC,KAAtB,kBAA0CjB,KAAK,MAAL,EAAaqB,IAAb,CAA1C,EAA8DH,IAA9D,CAAmE,UAACC,QAAD,EAAc;AACtF,WAAOA,SAASC,IAAT,EAAP;AACD,GAFM,EAEJF,IAFI,CAEC,UAACZ,IAAD,EAAU;AAChB,WAAOA,IAAP;AACD,GAJM,CAAP;AAMD;;AAED;;AAEO,SAASF,MAAT,GAAkB;;AAEvBU,eAAaQ,UAAb,CAAwB,gBAAxB;AAED;;;;;;;;gCAhEetB,I;;gCAuBAC,e;;gCAaAC,E;;gCAYAC,M;;gCAYAC,M","file":"index.js","sourceRoot":"/home/leo/htdocs/biodiversity_catalogue_v2_frontend","sourcesContent":["import fetch from 'isomorphic-fetch';\nimport Const from '../const';\n\n//Http\n\nexport function http(type, data) {\n\n  var body = new FormData();\n\n  if (data) {\n    for (var key in data) {\n      body.append(key, data[key]);\n    }\n  }\n\n  return {\n    method: type,\n    // mode: 'cors',\n    headers: new Headers({'Authorization': `bearer ${localStorage.getItem('token-catalogo')}`}),\n    body: data\n      ? body\n      : null\n  }\n\n}\n\n//is authenticated\n\nexport function isAuthenticated() {\n  // console.log(nextState);\n  // console.log(replaceState);\n  // console.log('herisAuthenticatede');\n  // return false;\n  // return typeof localStorage.getItem('token-catalogo')\n  // !=='undefined'\n  //   ? true\n  //   : false;\n}\n\n//Get Me\n\nexport function me() {\n\n  return fetch(`${Const.server.local}/api/user/me`, http('GET', null)).then((response) => {\n    return response.json()\n  }).then((data) => {\n    return data\n  })\n\n}\n\n//signin\n\nexport function signin(user) {\n\n  return fetch(`${Const.server.local}/auth/local`, http('POST', user)).then((response) => {\n    return response.json()\n  }).then((data) => {\n    return data\n  })\n\n}\n\n//logout\n\nexport function logout() {\n\n  localStorage.removeItem('token-catalogo');\n\n}\n"]}